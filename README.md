# Coding Friend

<p align="center">
  <img src="assets/logo.svg" alt="Coding Friend Logo" width="100" />
</p>

Lean toolkit for disciplined engineering workflows with Claude Code.

## âœ¨ What It Does

- Enforces test-driven development (TDD)
- Provides systematic debugging methodology
- Quick bug fix workflow (`/cf-fix`)
- Structured optimization with before/after measurement (`/cf-optimize`)
- Quick Q&A about codebase with memory (`/cf-ask`)
- Ensures verification before claiming done
- Smart conventional commits and code review
- Captures project knowledge across sessions (via `/cf-remember`).
- Helps humans learn from vibe coding sessions (generated by `/cf-learn`). Host learning docs as a local website at `localhost:3333` (via `cf host`) or setup MCP server (via `cf mcp`) so that you can use it in other LLM clients.
- In-depth research with web search and parallel subagents (via `/cf-research`).
- Customize the Claude Code statusline
  ```bash
  cf v1.2.1 â”‚ ProjectName â”‚ Opus 4.6 â”‚ â‡ branchName â”‚ 15% â†’ 13:00
  ```

## ğŸš€ Usage & How It Works

- â˜ï¸ Read more in [workflows.md](docs/workflows.md) for more details.
- **Add a feature**: just describe the feature naturally `/cf-plan Build a REST API with auth`, a doc will be generated in `docs/plans/`.
- **Fix a bug**: just describe the bug naturally `/cf-fix Login fails with 401 when token is valid`, `cf-sys-debug` auto-loads.
- **Research**: In case you wanna research on some topics, just describe it `/cf-research I want to understand the key ideas of this repository https://github.com/dinhanhthi/ai-sync`, structured docs in `docs/research/`
- **Review code**: `/cf-review` or `/cf-review src/auth/` â€” 4-layer review in forked context
- **Commit & ship**: `/cf-commit refactor auth` or `/cf-ship Add notifications` (verify â†’ commit â†’ push â†’ PR)
- **Quick Q&A**: `/cf-ask How does the auth middleware work?` â€” explores codebase to answer, saves Q&A to `docs/memory/`
- **Optimize**: `/cf-optimize database query in getUserById` â€” structured workflow: baseline â†’ analyze â†’ optimize â†’ measure â†’ compare
- **Save knowledge**: Sometimes, you wanna save some notes/knowledge about the project when chatting, just use `/cf-remember auth flow` to store it in `docs/memory/`. In later conversations, you can use it to refer to.
  - With topic (`/cf-remember [topic]`): CF uses this topic to extract useful knowledge from the conversation.
  - Without topic (`/cf-remember`): CF scans the entire conversation for key knowledges (features, conventions, decisions, gotchas)
- **Learn**: One big problem of Vibe Coding is that you let AI do everything and you don't learn anything. So, `/cf-learn` helps you to extract the learnings from the conversation and store it in `docs/learn/` or a separate repo. Then you can read the docs with `cf host` in a beautiful website (`localhost:3333`) or use it as a MCP server for other LLM clients (like chat with ChatGPT about what you've learned so far).
  - `/cf-learn` can be auto invoked when substantial new knowledge is detected in conversation.
- ğŸ’¡ `cf-remember` is for AI, `cf-learn` is for humans.

All commands:


| Command                 | Description                                           |
| ----------------------- | ----------------------------------------------------- |
| `/cf-plan [task]`       | Brainstorm and write implementation plan              |
| `/cf-fix [bug]`         | Quick bug fix workflow                                |
| `/cf-ask [question]`    | Quick Q&A about codebase â†’ `docs/memory/`             |
| `/cf-optimize [target]` | Structured optimization with before/after measurement |
| `/cf-review [target]`   | Dispatch code review to subagent                      |
| `/cf-commit [hint]`     | Analyze diff and create conventional commit           |
| `/cf-ship [hint]`       | Verify, commit, push, and create PR                   |
| `/cf-remember [topic]`  | Extract project knowledge to `docs/memory/`           |
| `/cf-learn [topic]`     | Extract learnings to `docs/learn/`                    |
| `/cf-research [topic]`  | In-depth research with web search                     |


Auto-invoked skills (no slash needed): `cf-tdd` when writing code, `cf-sys-debug` when debugging, `cf-code-review` when reviewing, `cf-verification` before claiming done.

## ğŸ“¦ Installation

- **Prerequisites**: Some skills use the [GitHub CLI (`gh`)](https://cli.github.com/) for creating PRs. Install with `brew install gh && gh auth login`. Without it, skills fall back to manual alternatives.
- Install the Coding Friend CLI:
  ```bash
  npm i -g coding-friend-cli
  ```
  ğŸ§‘â€ğŸ’» Read more in [for-dev.md](docs/for-dev.md) for local development.
- Run `claude` and install the plugin from the marketplace:
  ```
  /plugin marketplace add dinhanhthi/coding-friend
  /plugin install coding-friend@coding-friend-marketplace
  ```
  ğŸ§‘â€ğŸ’» Read more in [for-dev.md](docs/for-dev.md) for local development.
- **In each project**, run `cf init` to set up the workspace folders (`docs/plans`, `docs/memory`, `docs/research`, `docs/learn`) and optionally add them to `.gitignore`.
- **Enable auto-update**: run `/plugin` > Go to installed plugins > select `coding-friend-marketplace` > Enable auto-update
- **Restart Claude Code** to load the plugin.

### ğŸ³ CLI Commands

```bash
cf init              # Initialize workspace (interactive)
                     # ğŸ’¡ You can run this anywhere, anytime.
cf host [path]       # Build and serve learning docs at localhost:3333
                     # [path] is optional, default is `docs/learn`
cf mcp [path]        # Setup MCP server for LLM integration
                     # [path] is optional, default is `docs/learn`
                     # This prints a JSON config snippet to add to your client's MCP
cf statusline        # Setup coding-friend statusline
cf update            # Update plugin + fix statusline
cf help              # Show all commands
```

Tab completion is automatically added to `~/.zshrc` (or `~/.bashrc`) on install and update.

### ğŸ› ï¸ Other stuffs

- For local development, refer to [for-dev.md](docs/for-dev.md).
- Manage plugin:
  ```bash
  # Update marketplace
  /plugin marketplace update
  # Update plugin
  /plugin update coding-friend@coding-friend-marketplace
  # Uninstall plugin
  /plugin uninstall coding-friend@coding-friend-marketplace
  # Remove marketplace
  /plugin marketplace remove coding-friend-marketplace   # Remove marketplace
  ```
- **Disable plugin for a specific project** â€” add to `.claude/settings.json` or `.claude/settings.local.json`:
  ```json
  {
    "enabledPlugins": {
      "coding-friend@coding-friend-marketplace": false
    }
  }
  ```

## Configuration

### .coding-friend/config.json (optional)

Create `.coding-friend/config.json` in your project to customize settings:

```json
{
  "docsDir": "docs",
  "hooks": {
    "privacyBlock": true,
    "scoutBlock": true,
    "devRulesReminder": true,
    "contextTracker": true
  },
  "commit": {
    "verify": true,
    "conventionalCommits": true
  }
}
```

All fields are optional. Defaults are used when omitted. No file = all defaults.


| Setting                      | Default  | Description                                             |
| ---------------------------- | -------- | ------------------------------------------------------- |
| `docsDir`                    | `"docs"` | Root folder for plans, memory, learn, and research docs |
| `hooks.privacyBlock`         | `true`   | Block access to .env and credentials                    |
| `hooks.scoutBlock`           | `true`   | Block access to .coding-friend/ignore patterns          |
| `hooks.devRulesReminder`     | `true`   | Inject rules on every prompt                            |
| `hooks.contextTracker`       | `true`   | Track files read per session                            |
| `commit.verify`              | `true`   | Run tests before committing                             |
| `commit.conventionalCommits` | `true`   | Enforce conventional commit format                      |


### .coding-friend/ignore

Add patterns to `.coding-friend/ignore` in your project to block agent access:

```
node_modules
dist
build
.next
__pycache__
```

### Privacy

The `privacy-block` hook automatically blocks access to:

- `.env` files (except `.env.example`)
- Credential files (`.pem`, `.key`, `id_rsa`)
- SSH directories (`.ssh/`)

Set `"privacyBlock": false` in `.coding-friend/config.json` to disable.

## Internals

Hooks, agents, project structure

### Hooks


| Hook                    | Event                   | Purpose                                            |
| ----------------------- | ----------------------- | -------------------------------------------------- |
| `session-init.sh`       | SessionStart            | Bootstrap context                                  |
| `dev-rules-reminder.sh` | UserPromptSubmit        | Inject core rules                                  |
| `privacy-block.sh`      | PreToolUse              | Block .env, credentials                            |
| `scout-block.sh`        | PreToolUse              | Block .coding-friend/ignore patterns               |
| `statusline.sh`         | â€” (via `cf statusline`) | Optional statusline (folder, model, branch, usage) |
| `compact-marker.sh`     | PreCompact              | Preserve context                                   |
| `context-tracker.sh`    | PostToolUse             | Track files read                                   |


### Agents


| Agent           | Purpose                               |
| --------------- | ------------------------------------- |
| `code-reviewer` | Multi-layer code review               |
| `implementer`   | TDD implementation                    |
| `planner`       | Codebase exploration + task breakdown |


### Project Structure

```
coding-friend/
â”œâ”€â”€ CLAUDE.md                # Claude Code rules
â”œâ”€â”€ .coding-friend/          # User config (optional)
â”‚   â”œâ”€â”€ config.json          # Settings
â”‚   â””â”€â”€ ignore               # Agent ignore patterns
â”œâ”€â”€ .claude-plugin/          # Plugin + marketplace manifest
â”œâ”€â”€ .claude/                 # Settings + agents
â”œâ”€â”€ hooks/                   # Lifecycle hooks
â”œâ”€â”€ skills/                  # 15 skills
â”œâ”€â”€ cli/                     # Standalone CLI (npm: coding-friend-cli)
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ learn-host/          # Next.js static site for learning docs
â”‚   â””â”€â”€ learn-mcp/           # MCP server for LLM integration
â””â”€â”€ docs/                    # Generated docs
    â”œâ”€â”€ plans/               # Implementation plans
    â”œâ”€â”€ memory/              # Project knowledge
    â”œâ”€â”€ learn/               # Human learning notes
    â””â”€â”€ research/            # In-depth research results
```



## License

MIT